
<!DOCTYPE html>
<html>
<head>
    <title>ç™»å½•å¾ªç¯æµ‹è¯•</title>
</head>
<body>
    <h1>æµ‹è¯•æ— æ•ˆsessionIdæ¸…ç†é€»è¾‘</h1>
    <div id="status">å‡†å¤‡æµ‹è¯•...</div>
    
    <script>
        // æ¨¡æ‹ŸlocalStorageä¸­å­˜åœ¨æ— æ•ˆsessionIdçš„æƒ…å†µ
        localStorage.setItem('sessionId', 'invalid-session-id-12345');
        localStorage.setItem('sessionId_backup', 'invalid-backup-session-id-12345');
        localStorage.setItem('lastActivity', Date.now().toString());
        
        console.log('ğŸ” æ¨¡æ‹Ÿåœºæ™¯å·²è®¾ç½®:');
        console.log('sessionId:', localStorage.getItem('sessionId'));
        console.log('sessionId_backup:', localStorage.getItem('sessionId_backup'));
        console.log('lastActivity:', localStorage.getItem('lastActivity'));
        
        document.getElementById('status').innerHTML = 
            'âœ… æµ‹è¯•åœºæ™¯å·²è®¾ç½®<br>' +
            'ğŸ“‹ sessionId: ' + localStorage.getItem('sessionId') + '<br>' +
            'ğŸ“‹ sessionId_backup: ' + localStorage.getItem('sessionId_backup') + '<br>' +
            'ğŸ“‹ lastActivity: ' + localStorage.getItem('lastActivity');
        
        // æµ‹è¯•æ¸…ç†é€»è¾‘
        function testClearInvalidSession() {
            console.log('ğŸ§¹ æµ‹è¯•æ— æ•ˆsessionIdæ¸…ç†...');
            
            // æ¨¡æ‹Ÿç³»ç»Ÿæ£€æµ‹åˆ°æ— æ•ˆsessionIdåçš„æ¸…ç†æ“ä½œ
            localStorage.removeItem('sessionId');
            localStorage.removeItem('sessionId_backup');
            localStorage.removeItem('lastActivity');
            console.log('ğŸ—‘ï¸ å·²æ¸…é™¤æ— æ•ˆçš„sessionId');
            
            console.log('ğŸ” æ¸…ç†åæ£€æŸ¥:');
            console.log('sessionId:', localStorage.getItem('sessionId'));
            console.log('sessionId_backup:', localStorage.getItem('sessionId_backup'));
            console.log('lastActivity:', localStorage.getItem('lastActivity'));
            
            const allCleared = 
                !localStorage.getItem('sessionId') && 
                !localStorage.getItem('sessionId_backup') && 
                !localStorage.getItem('lastActivity');
                
            if (allCleared) {
                console.log('âœ… æ¸…ç†æµ‹è¯•é€šè¿‡');
                document.getElementById('status').innerHTML += '<br><br>âœ… æ¸…ç†æµ‹è¯•é€šè¿‡';
            } else {
                console.log('âŒ æ¸…ç†æµ‹è¯•å¤±è´¥');
                document.getElementById('status').innerHTML += '<br><br>âŒ æ¸…ç†æµ‹è¯•å¤±è´¥';
            }
        }
        
        // 3ç§’åæ‰§è¡Œæ¸…ç†æµ‹è¯•
        setTimeout(testClearInvalidSession, 3000);
    </script>
</body>
</html>
